#!/usr/bin/env bash
# Pre-commit hook: lint + format check + unit tests with 85% coverage gate.
# Install via: make hooks
set -euo pipefail

echo "=== Pre-commit: Ruff lint ==="
uv run ruff check .

echo "=== Pre-commit: Ruff format check ==="
uv run ruff format --check .

echo "=== Pre-commit: Unit tests (coverage >= 85%) ==="
uv run pytest -m unit --cov=src --cov-fail-under=85 -q --tb=short

echo "=== All pre-commit checks passed ==="
